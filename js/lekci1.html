<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let data = [{"id": 1, "name": "Иван Иванов", "email": "pereinar@optonline.net", "phone": "12345344", "title": "Мениджър"},
            {"id": 2, "name": "Мария Петрова", "email": "juliano@aol.com", "phone": "368938736", "title": "Програмист"},
            {"id": 3, "name": "Стефан Колев", "email": "jipsen@outlook.com", "phone": "866893", "title": "Финансов директор"},
            {"id": 4, "name": "Петя Илиева", "email": "rasca@msn.com", "phone": "10237129", "title": "Бодигард"},
            {"id": 5, "name": "Деница Филева", "email": "mahbub@att.net", "phone": "0739483", "title": "Офис сътрудник"}];

            let alertDiv = document.createElement('div');
            alertDiv.classList.add('alert', 'alert-success', 'd-none');
            alertDiv.innerText = 'Потребител намерен';
            let row = document.querySelector('.col-6');
            row.prepend(alertDiv);

            let email = document.querySelector('.email-field');
            let phone = document.querySelector('.phone-field');
            let title = document.querySelector('.title-field');
            let flag = false;
            let s = document.querySelector('.form-select');
            s.addEventListener('change', (e) => {
              flag = false;
              let id = e.target.value;
              data.forEach((item, index) => {
                if(item.id == id){
                  email.value = item.email;
                  phone.value = item.phone;
                  title.value = item.title;
                  alertDiv.classList.remove('d-none');
                  alertDiv.classList.remove('alert-danger');
                  alertDiv.classList.add('alert-success');
                  alertDiv.innerText = 'Потребител намерен';
                  flag = true;
                } 

              });
              if(flag == false){
                email.value = '';
                phone.value = '';
                title.value = '';
                alertDiv.classList.remove('alert-success');
                alertDiv.classList.remove('d-none');
                alertDiv.classList.add('alert-danger');
                alertDiv.innerText = 'Няма данни';

              }
            });

            document.querySelector('.btn-primary').addEventListener('click', (e) => {
              let id = s.value;
              let flag = false;
              data.forEach((item, index) => {
                 if(item.id == id){
                  item.email = email.value;
                  item.phone = phone.value;
                  item.title = title.value;
                  flag = true;
                 }
              });
              if(flag == false){
                data.push({id: parseInt(id), name: s.options[s.selectedIndex].innerText, email: email.value, phone: phone.value, title: title.value});
              }
              console.log(data);

              alertDiv.innerText = 'Данни запаметени';
              alertDiv.classList.add('alert-success');
              alertDiv.classList.remove('alert-danger');
            });

        });
    </script>
</head>
<body>
    <div class="container">
        <div class="row flex-column ">
            <div class="col-6 mx-auto mt-3">
                <div class="form-group">
                    <select class="form-select">
                      <option selected="">Избери потребител</option>
                      <option value="1">Иван Иванов</option>
                      <option value="2">Мария Петрова</option>
                      <option value="3">Стефан Колев</option>
                      <option value="4">Петя Илиева</option>
                      <option value="5">Деница Филева</option>
                      <option value="7">Красимир Жечев</option>
                      <option value="8">Здравко Стоянов</option>
                      <option value="10">Катерина Момчилова</option>
                      <option value="11">Панчо Панчев</option>
                      <option value="15">Елица Стоинева</option>
                    </select>
                    </div>
                    <div class="form-group">
                        <label for="">Имейл</label>
                        <input type="text" class="form-control email-field">
                    </div>
                    <div class="form-group">
                        <label for="">Телефон</label>
                        <input type="text" class="form-control phone-field">
                    </div>
                    <div class="form-group">
                        <label for="">Длъжност</label>
                        <input type="text" class="form-control title-field">
                    </div>
                    <div class="form-group d-grid">
                        <input type="button" class="btn btn-primary" value="Съхрани">
                    </div>
                   <!--  <a href="" class="btn btn-secondary" data-phone='5' data-email='ivancho@gmail.com' data-title='influenser'>mariq</a>
                    <a href="" class="btn btn-secondary" data-phone='5' data-email='ivancho@gmail.com' data-title='influenser'>Иван</a>
                    <a href="" class="btn btn-secondary" data-phone='5' data-email='ivancho@gmail.com' data-title='influenser'>teodor</a>
                    <a href="" class="btn btn-secondary" data-phone='5' data-email='ivancho@gmail.com' data-title='influenser'>petko</a>
                    <a href="" class="btn btn-secondary" data-phone='5' data-email='ivancho@gmail.com' data-title='influenser'>denica</a>
                 --></div>
            </div>
        </div>
    </div>
</body>
</html>